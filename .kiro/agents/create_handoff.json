{
  "description": "Use when creating handoff document for transferring work to another session",
  "prompt": "# Create Handoff\n\nYou are tasked with writing a handoff document to hand off your work to another agent in a new session. You will create a handoff document that is thorough, but also **concise**. The goal is to compact and summarize your context without losing any of the key details of what you're working on.\n\n\n## Process\n### 1. Filepath & Metadata\nUse the following information to understand how to create your document:\n    - create your file under `thoughts/handoffs/YYYY-MM-DD_HH-MM-SS_description.md`, where:\n        - YYYY-MM-DD is today's date\n        - HH-MM-SS is the hours, minutes and seconds based on the current time, in 24-hour format (i.e. use `13:00` for `1:00 pm`)\n        - description is a brief kebab-case description\n    - Generate metadata inline:\n        - current_date: Use current date/time in ISO format with timezone\n        - git_commit: Run `git rev-parse HEAD 2>/dev/null || echo \"N/A (not in git repository)\"`\n        - branch: Run `git rev-parse --abbrev-ref HEAD 2>/dev/null || echo \"N/A\"`\n        - repository: Run `basename \"$(git rev-parse --show-toplevel 2>/dev/null)\" || basename \"$PWD\"`\n    - Examples:\n        - `2025-01-08_13-55-22_create-context-compaction.md`\n        - `2025-01-08_13-55-22_implement-handoff-system.md`\n\n### 2. Handoff writing.\nusing the above conventions, write your document. use the defined filepath, and the following YAML frontmatter pattern. Use the metadata gathered in step 1, Structure the document with YAML frontmatter followed by content:\n\n**Size budget: 500â€“5,000 tokens.** Maximum 5,000 tokens. This is a compacted context transfer, not a journal. Be thorough but concise.\n\n**MANDATORY MINIMUM: 500 tokens.** Before writing the file, estimate the document's token count. If it would be under 500 tokens, you MUST expand: add more detail to task descriptions, more file:line references in learnings, more specific action items. A handoff under 500 tokens cannot provide enough context for a new session to resume effectively. Do NOT write the file until it meets the minimum.\n\nUse the following template structure:\n```markdown\n---\nstatus: incomplete\ntype: handoff\ntopic: \"{very concise description}\"\n---\n\n# Handoff: {very concise description}\n\n## Task(s)\n{description of the task(s) that you were working on, along with the status of each (completed, work in progress, planned/discussed). If you are working on an implementation plan, make sure to call out which phase you are on. Make sure to reference the plan document and/or research document(s) you are working from that were provided to you at the beginning of the session, if applicable.}\n\n## Critical References\n{List any critical specification documents, architectural decisions, or design docs that must be followed. Include only 2-3 most important file paths. Leave blank if none.}\n\n## Learnings\n{describe important things that you learned - e.g. patterns, root causes of bugs, or other important pieces of information someone that is picking up your work after you should know. consider listing explicit file paths.}\n\n## Action Items & Next Steps\n{ a list of action items and next steps for the next agent to accomplish based on your tasks and their statuses}\n\n## Recent Changes\n{describe recent changes made to the codebase that you made in file:line syntax}\n\n## Artifacts\n{ an exhaustive list of artifacts you produced or updated as filepaths and/or file:line references - e.g. paths to feature documents, implementation plans, etc that should be read in order to resume your work.}\n\n## Metadata\n- Date: [Current date and time with timezone]\n- Git: [Current commit hash] ([branch name])\n- Repository: [Repository name]\n- Tags: [handoff, relevant-component-names]\n```\n---\n\n### 3. Approve and Sync\nOnce this is completed, you should respond to the user with the template between <template_response></template_response> XML tags. do NOT include the tags in your response.\n\n<template_response>\nHandoff created! You can resume from this handoff in a new session with the following command:\n\n```bash\nresume from a handoff path/to/handoff.md\n```\n</template_response>\n\nfor example (between <example_response></example_response> XML tags - do NOT include these tags in your actual response to the user)\n\n<example_response>\nHandoff created and synced! You can resume from this handoff in a new session with the following command:\n\n```bash\nresume from a handoff thoughts/handoffs/2025-01-08_13-44-55_create-context-compaction.md\n```\n</example_response>\n\n---\n##.  Additional Notes & Instructions\n- **more information, not less**. This is a guideline that defines the minimum of what a handoff should be. Always feel free to include more information if necessary.\n- **be thorough and precise**. include both top-level objectives, and lower-level details as necessary.\n- **avoid excessive code snippets**. While a brief snippet to describe some key change is important, avoid large code blocks or diffs; do not include one unless it's necessary (e.g. pertains to an error you're debugging). Prefer using `/path/to/file.ext:line` references that an agent can follow later when it's ready, e.g. `packages/dashboard/src/app/dashboard/page.tsx:12-24`",
  "tools": [
    "fs_read",
    "fs_write",
    "execute_bash",
    "web_search",
    "web_fetch",
    "todo_list"
  ],
  "allowedTools": [
    "fs_read"
  ]
}